<!DOCTYPE HTML>
<html lang='en'>
  <head>
    <meta charset="utf-8">
    <link href="plugin/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="plugin/colorpicker/css/colorpicker.css" rel="stylesheet">
    <link href="plugin/jquery-ui/css/ui-lightness/jquery-ui.css" rel="stylesheet">
    <script type="text/javascript" src="javascripts/jquery-dev.js"></script>
    <script type="text/javascript" src="plugin/jquery-ui/js/jquery-ui.js"></script>
    <script type="text/javascript" src="plugin/bootstrap/js/bootstrap.js"></script>
    <script type="text/javascript" src="plugin/colorpicker/js/bootstrap-colorpicker.js"></script>
    <style type="text/css">
      #main_canvas{
        height: 400px;
        background: grey;
      }
    </style>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span2">
          <ul class="nav nav-tabs nav-stacked">
            <li id='tool_jx'>
              <div id="source_jx" style="width:100px;height:100px;background: green;">
                矩形
              </div>
            </li>
            <li id='tool_yx'>
              <div id="source_yx" style="width:100px;height:100px;background: red;">
                圆形
              </div>
            </li>
          </ul>
        </div>
        <div id='main_canvas' class="span6">

        </div>
        <div id='detail' class="span4">
          <label for="text_size">字体大小</label>
          <input type="range" id="text_size" name="points" min="1" max="10" />
          <br/>
          <div class="input-append color" data-color="rgb(255, 146, 180)" data-color-format="rgb">
            <label for="background_color">背景颜色</label>
            <input type="text" id="background_color" class="span5" value="" >
            <span class="add-on"><i style="background-color: rgb(255, 146, 180)"></i></span>
          </div>

        </div>
      </div>
    </div>

  </body>
  <script type="text/javascript">
    var current_element = null;
    $(document).ready(function(){
      $('#background_color').colorpicker();
      $('#background_color').blur(function(){
        var color = $(this).val();
        current_element.css('background-color', color);
      });
      $(document).on("click", ".current_element", function(){
        current_element = $(this);
      }); 
      $( "#source_jx" ).draggable({
        helper: "clone",
        cursor: 'move', //鼠标样式
        opacity: 0.8,  //拖拽时透明
        start: function(event, ui){

        },
        stop: function(event, ui){

        }
      });
      $("#source_yx" ).draggable();

      $('#main_canvas').droppable({
        drop: function(event,ui){
          var d = $(ui.draggable[0]).clone();
          if(d.hasClass('draggable')){
          }else{
            d.attr('id', null);
            d.addClass('draggable');
            d.addClass('current_element');
            d.empty();
            d.draggable();
            d.resizable();
            current_element = d;
            $(this).append(d);
          }
        }
      });

    })
  </script>
</html>